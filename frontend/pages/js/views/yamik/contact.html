<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bayleaf Salon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="contact.css">
    

    <link rel="stylesheet" href="MediaQuery.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://kit.fontawesome.com/7a6c6b42a6.js" crossorigin="anonymous"></script>
</head>

<body>

    <header>
        <a href="./index.html" class="logo">Bayleaf Salon</a>
        <div class="menuToggle"></div>
        <nav>
            <ul>
                <li><a href="./index.html">HOME</a></li>
                <li><a href="./about.html">ABOUT</a></li>
                <li><a href="./services.html">SERVICES</a></li>
                <li><a href="./portfolio.html">PORTFOLIO</a></li>
                <li><a href="./contact.html">CONTACT</a></li>
                <li><a href="./appointment_edit.html">APPOINTMENTS</a></li>
                <li><a href="./login.html" id="loginLink">LOGIN</a></li>
                <li><a href="./products.html" id="NavNum">PRODUCTS</a></li>
            </ul>
        </nav>
    </header>


    <section class="sectionFirst">
        <h1>Contact Us</h1>

        <section class="transform-img">
            <img src="./img/background180.svg" alt="">
        </section>
    </section>


    <section class="FormMap">
        <div class="form">
            <div class="f-head">Get In Touch</div>
            <div class="f-para">Welcome to BAYLEAF SALON!!!!!!</div>

            <!-- Add notification div -->
            <div id="notification" style="display: none; padding: 15px; margin-bottom: 20px; border-radius: 5px;"></div>

            <form id="appointmentForm" onsubmit="submitForm(event)">
                <select name="service" id="service" required>
                    <option value="" disabled selected>Select Services</option>
                    <option value="Facials">Facials</option>
                    <option value="Hair Styling">Hair Styling</option>
                    <option value="Full Body Massage">Full Body Massage</option>
                    <option value="Manicure">Manicure</option>
                    <option value="Pedicure">Pedicure</option>
                </select>
                <input type="date" name="date" id="date" required>
                <select name="time" id="time" required>
                    <option value="" disabled selected>Select your Time</option>
                    <option value="10:00am-10:30am">10:00am-10:30am</option>
                    <option value="10:30am-11:00am">10:30am-11:00am</option>
                    <option value="11:00am-11:30am">11:00am-11:30am</option>
                    <option value="11:30am-12:00pm">11:30am-12:00pm</option>
                </select>
                <select name="location" id="location" required>
                    <option value="" disabled selected>Select Location</option>
                    <option value="Kalyan">Kalyan(West)</option>
                    <option value="Andheri">Andheri(East)</option>
                    <option value="Dadar">Dadar(West)</option>
                    <option value="Matunga">Matunga(West)</option>
                    <option value="Dombivali">Dombivali(West)</option>
                    <option value="Kurla">Thane(East)</option>
                    <option value="Bandra">Bandra(West)</option>
                    <option value="Ghatkopar">Ghatkopar(East)</option>
                    <option value="Mulund">Mulund(East)</option>
                   
                    
                    
                </select>
                <textarea name="message" id="message" cols="30" rows="10" placeholder="Message (optional)"></textarea>
                <button type="submit">Send Request</button>
            </form>
        </div>

        <div class="map">
            <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3506.5149208586167!2d77.08639887464352!3d28.494151690352858!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390d193845155555%3A0x60d85750634bd7b2!2sGoogle%20DLF%20Tower%208C!5e0!3m2!1sen!2sin!4v1691352060091!5m2!1sen!2sin"
                width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </section>

    <div class="beforefooter">
        <div class="box">
            <div class="logo">Bayleaf Salon</div>

            <p class="para">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nostrum ipsam sit magni et
                consequatur, tenetur ab doloremque totam necessitatibus inventore optio qui? Inventore vel quibusdam
                exercitationem, nulla asperiores fugiat totam!</p>

            <div class="bf-text">Subscribe For Offers</div>

            <div class="subscribe">
                <input type="text" name="" id="">
                <button class="btn">subscribe</button>
            </div>
        </div>

        <div class="box">
            <div class="bf-text">Quick Links</div>
            <ul>
                <li><a href="./index.html">Home</a></li>
                <li><a href="./about.html">About</a></li>
                <li><a href="./services.html">Services</a></li>
                <li><a href="./protfolio.html">Portfolio</a></li>
                <li><a href="./contact.html">Contact</a></li>
            </ul>

            <div class="bf-text">Follow Us</div>
            <div class="icons">
                <a href="https://www.facebook.com/profile.php?id=61575497342961"  target="_blank" class="fa-brands fa-facebook-f"></a>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=bayleaf.salon.india@gmail.com" target="_blank" class="fa-brands fa-google"></a>
                <a href="https://www.instagram.com/bayleaf_salon/" target="_blank" class="fa-brands fa-instagram"></a>
                <a href="https://www.youtube.com/channel/UCFb5ef8_aJxttE78fz-onHw" target="_blank" class="fa-brands fa-youtube"></a>
            </div>
        </div>

        <div class="box">
            <div class="bf-text">Mail Us!</div>
            <ul class="SayHi">
                <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=2023.ved.joshi@ves.ac.in&su=Bayleaf%20Salon%20Inquiry" target="_blank">2023.ved.joshi@ves.ac.in</a></li>
                <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=2023.nikhil.kadam@ves.ac.in&su=Bayleaf%20Salon%20Inquiry" target="_blank">2023.nikhil.kadam@ves.ac.in</a></li>
                <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=2023.aarya.thorat@ves.ac.in&su=Bayleaf%20Salon%20Inquiry" target="_blank">2023.aarya.thorat@ves.ac.in</a></li>
                <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=2023.chinmay.ambre@ves.ac.in&su=Bayleaf%20Salon%20Inquiry" target="_blank">2023.chinmay.ambre@ves.ac.in</a></li>
            </ul>

            <div class="bf-text">Call Us</div>
            <ul class="SayHi">
                <li>Phone : 7021623887</li>
                <li>Toll Free (In case): 90999 78999</li>
            </ul>

            <div class="bf-text">Find Us</div>

            <div class="address">
                Rajhans wada, Nr. St Joseph Church, Ganesh Nagar, Dombivali (West) - 421202;
            </div>

        </div>
    </div>
    </div>


    <footer>
        <div class="fbox">Copyright © 2025 Bayleaf Salon</div>
        <div class="fbox">Powered By Bayleaf Salon</div>
    </footer>

    <script src="./script.js"></script>
    <script>
// Store the form reference
const appointmentForm = document.getElementById('appointmentForm');

async function submitForm(event) {
    event.preventDefault();
    
    // Get user data from session storage
    const userData = JSON.parse(sessionStorage.getItem('bayleafUser') || '{}');
    
    // Debug log to check user data
    console.log('Current user data:', userData);

    // Check if user is logged in
    if (!userData || !userData.email) {
        showNotification('Please log in to book an appointment', true);
        return;
    }

    // Get form values
    const formData = {
        service: document.getElementById('service').value,
        date: document.getElementById('date').value,
        time: document.getElementById('time').value,
        location: document.getElementById('location').value,
        message: document.getElementById('message').value || "-",
        email: userData.email // Include user's email from session
    };

    console.log('Submitting appointment with data:', formData);

    try {
        const response = await fetch('/request', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
        });

        const data = await response.json();
        
        if (response.ok) {
            showNotification('Request sent successfully! We will contact you soon.');
            appointmentForm.reset();
        } else {
            showNotification(data.error || 'Failed to send request', true);
        }
    } catch (error) {
        console.error('Error:', error);
        showNotification('Network error. Please try again.', true);
    }
}

function showNotification(message, isError = false) {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.style.display = 'block';
    notification.style.backgroundColor = isError ? '#ff4444' : '#44b744';
    notification.style.color = 'white';
    setTimeout(() => {
        notification.style.display = 'none';
    }, 3000);
}

// Set minimum date to today for the date input
document.getElementById('date').min = new Date().toISOString().split('T')[0];

// Add form submit event listener
appointmentForm.addEventListener('submit', submitForm);

// Check login status on page load
document.addEventListener('DOMContentLoaded', function() {
    const userData = sessionStorage.getItem('bayleafUser');
    console.log('Checking user session on page load:', userData);
    
    if (userData) {
        const user = JSON.parse(userData);
        console.log('User is logged in:', user);
        // Show profile link if logged in
        const loginLink = document.getElementById('loginLink');
        if (loginLink) {
            loginLink.innerHTML = `
                <div class="user-profile-container">
                    <span class="user-avatar-small">${user.firstName.charAt(0)}</span>
                    ${user.firstName}
                </div>`;
            loginLink.style.cursor = 'pointer';
        }
    }
});

// Update JavaScript event handlers
document.addEventListener('DOMContentLoaded', function() {
    const loginLink = document.getElementById('loginLink');
    const userData = sessionStorage.getItem('bayleafUser');

    if (userData) {
        try {
            const user = JSON.parse(userData);
            
            if (loginLink) {
                // Create modal overlay
                const modalOverlay = document.createElement('div');
                modalOverlay.className = 'profile-modal-overlay';
                modalOverlay.id = 'profileModalOverlay';
                
                // Create profile card HTML
                modalOverlay.innerHTML = `
                    <div class="user-profile-card" id="profileCard">
                        <div class="profile-card-content">
                            <button class="close-profile-card" id="closeProfileCard">×</button>
                            <div class="user-avatar">${user.firstName.charAt(0)}</div>
                            <div class="user-profile-header">
                                <div class="user-profile-info">
                                    <div class="user-profile-name">${user.firstName} ${user.lastName}</div>
                                    <div class="user-profile-role">Premium Member</div>
                                </div>
                            </div>
                            
                            <div class="user-profile-details">
                                <div class="user-profile-detail">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"></path>
                                    </svg>
                                    <span>${user.email}</span>
                                </div>
                            </div>
                            <div class="user-profile-actions">
                                <a href="profile.html" class="profile-action-btn profile-view-btn">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path>
                                    </svg>
                                    View Profile
                                </a>
                                <a href="#" id="logoutBtn" class="profile-action-btn profile-logout-btn">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"></path>
                                    </svg>
                                    Logout
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modalOverlay);
                
                // Update login link
                loginLink.innerHTML = user.firstName;
                loginLink.style.cursor = 'pointer';
                
                // Toggle profile card
                loginLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    const profileCard = document.getElementById('profileCard');
                    const modalOverlay = document.getElementById('profileModalOverlay');
                    
                    // Calculate position
                    const rect = loginLink.getBoundingClientRect();
                    let topPosition = (rect.bottom + window.scrollY);
                    let leftPosition = (rect.left - 160 + rect.width/2);
                    
                    // Ensure card stays within viewport bounds
                    const viewportWidth = window.innerWidth;
                    if (leftPosition + 320 > viewportWidth) {
                        leftPosition = viewportWidth - 340;
                    }
                    if (leftPosition < 20) {
                        leftPosition = 20;
                    }
                    
                    profileCard.style.top = topPosition + 'px';
                    profileCard.style.left = leftPosition + 'px';
                    
                    profileCard.style.display = 'block';
                    modalOverlay.style.display = 'block';
                });

                // Close profile card
                document.getElementById('closeProfileCard').addEventListener('click', function() {
                    const profileCard = document.getElementById('profileCard');
                    const modalOverlay = document.getElementById('profileModalOverlay');
                    profileCard.style.display = 'none';
                    modalOverlay.style.display = 'none';
                });

                // Close when clicking overlay
                modalOverlay.addEventListener('click', function(e) {
                    if (e.target === modalOverlay) {
                        const profileCard = document.getElementById('profileCard');
                        profileCard.style.display = 'none';
                        modalOverlay.style.display = 'none';
                    }
                });

                // Handle logout
                document.getElementById('logoutBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    sessionStorage.removeItem('bayleafUser');
                    window.location.href = 'index.html';
                });

                // Close on escape key
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        const profileCard = document.getElementById('profileCard');
                        const modalOverlay = document.getElementById('profileModalOverlay');
                        if (profileCard.style.display === 'block') {
                            profileCard.style.display = 'none';
                            modalOverlay.style.display = 'none';
                        }
                    }
                });
            }
        } catch (error) {
            console.error('Error parsing user data:', error);
            sessionStorage.removeItem('bayleafUser');
        }
    }
});
</script>
    
    <style>
        /* Profile popup card - Clean simple design */
        .user-profile-card {
            display: block;
            width: 320px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            padding: 0;
            z-index: 10001;
            border: none;
            position: fixed;
            animation: fadeIn 0.3s ease;
            overflow: hidden;
            top:71px;
            right: 208px;
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .profile-card-top-decoration {
            display: none; /* Hide this section */
        }
        
        .profile-card-content {
            padding: 0;
            position: relative;
        }
        
        .close-profile-card {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: rgba(255, 20, 147, 0.2);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #ff1493;
            z-index: 10;
        }
        
        .user-avatar {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #ff69b4, #ff1493);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            color: white;
            font-weight: bold;
            font-size: 28px;
            border: 3px solid white;
            position: relative;
            top: 0;
            left: 0;
            margin: 20px 0 0 20px;
        }
        
        .user-profile-header {
            display: flex;
            flex-direction: column;
            padding: 20px;
            padding-top: 45px;
            border-bottom: 1px solid #eee;
        }
        
        .user-profile-info {
            text-align: left;
            margin-left: 0;
        }
        
        .user-profile-name {
            font-weight: 600;
            font-size: 18px;
            color: #333;
            margin-bottom: 6px;
        }
        
        .user-profile-role {
            font-size: 14px;
            color: #777;
            display: inline-block;
            background-color: #f5f5f5;
            padding: 4px 12px;
            border-radius: 50px;
            font-weight: 500;
        }
        
        .user-profile-details {
            margin: 0;
            background-color: #f8f8f8;
            padding: 0;
        }
        
        .user-profile-detail {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            font-size: 14px;
            color: #333;
            border-bottom: 1px solid #eee;
        }
        
        .user-profile-detail:last-child {
            border-bottom: none;
        }
        
        .user-profile-detail svg {
            width: 18px;
            height: 18px;
            margin-right: 12px;
            min-width: 18px;
            fill: #ff1493;
        }
        
        .user-profile-actions {
            display: flex;
            flex-direction: column;
            padding: 15px 20px;
        }
        
        .profile-action-btn {
            padding: 14px;
            border-radius: 50px;
            text-align: center;
            font-size: 15px;
            margin-bottom: 10px;
            text-decoration: none;
            transition: all 0.2s;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .profile-action-btn svg {
            width: 16px;
            height: 16px;
            margin-right: 8px;
        }
        
        .profile-view-btn {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .profile-logout-btn {
            background: linear-gradient(to right, #ff69b4, #ff1493);
            color: white;
            margin-bottom: 0;
        }
        
        .profile-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 10000;
            pointer-events: auto;
        }
        
        .profile-modal-overlay.active {
            display: block;
        }
    </style>
</body>

</html>
